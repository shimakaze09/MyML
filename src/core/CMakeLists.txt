SET(LIBS My::MyTemplate_core)

IF (TARGET xsimd)
    LIST(APPEND LIBS xsimd)
ENDIF ()

ADD_TARGET(MODE "HEAD" INTERFACE_INC ON LIBS ${LIBS})

IF (TARGET xsimd)
    MESSAGE(STATUS "Use xsimd")
    GET_TARGET_NAME(TARGET_NAME ${CMAKE_CURRENT_SOURCE_DIR})
    TARGET_COMPILE_DEFINITIONS(${TARGET_NAME} INTERFACE USE_XSIMD)
ENDIF ()